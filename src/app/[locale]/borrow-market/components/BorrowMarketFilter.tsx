import React, { PropsWithChildren } from "react";

import Checkbox from "@/components/atoms/Checkbox";
import Drawer from "@/components/atoms/Drawer";
import Input from "@/components/atoms/Input";
import Svg from "@/components/atoms/Svg";
import { InputLabel } from "@/components/atoms/TextField";
import Button, { ButtonVariant } from "@/components/buttons/Button";
import IconButton, { IconButtonVariant } from "@/components/buttons/IconButton";

function ButtonRow({ children }: PropsWithChildren) {
  return <div className="auto-cols-fr grid gap-3 grid-flow-col">{children}</div>;
}

function ExternalIconLink({ href }: { href: string }) {
  return (
    <a href={href} className="w-10 h-10 flex items-center justify-center" target="_blank">
      <Svg iconName="forward" />
    </a>
  );
}

function CheckboxExternalLink({ checked, handleChange, id, label }: any) {
  return (
    <div className="bg-secondary-bg rounded-2 flex justify-between pr-3 pl-2 items-center">
      <Checkbox checked={checked} handleChange={handleChange} id={id} label={label} />
      <ExternalIconLink href={"#"} />
    </div>
  );
}

export default function BorrowMarketFilter({
  isDrawerOpened,
  setDrawerOpened,
}: {
  isDrawerOpened: boolean;
  setDrawerOpened: (isDrawerOpened: boolean) => void;
}) {
  return (
    <Drawer isOpen={isDrawerOpened} setIsOpen={setDrawerOpened} placement="left">
      <div className="w-[432px] pr-6 pl-10 pt-4">
        <div className="flex justify-between">
          <h3 className="text-20 font-bold">Filter</h3>
          <IconButton
            variant={IconButtonVariant.CLOSE}
            handleClose={() => setDrawerOpened(false)}
          />
        </div>
        <div className="mb-4">
          <InputLabel label="Borrowing amount, $" />
          <div className="grid grid-cols-[1fr_12px_1fr] gap-2">
            <Input placeholder="Min. amount" defaultValue={1} />
            <div className="h-full flex items-center">—</div>
            <Input placeholder="Max. amount" defaultValue={1000} />
          </div>
        </div>
        <div className="mb-6">
          <InputLabel label="Max. leverage" tooltipText="Max leverage tooltip" />
          <Input className="mb-3" placeholder="Max. leverage" />
          <div className="">
            <svg
              width="352"
              height="40"
              viewBox="0 0 352 40"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M0 12C0 9.79086 1.79086 8 4 8H348C350.209 8 352 9.79086 352 12C352 14.2091 350.209 16 348 16H4C1.79086 16 0 14.2091 0 12Z"
                fill="#0F0F0F"
              />
              <path
                d="M13 7C13 6.44772 13.4477 6 14 6C14.5523 6 15 6.44772 15 7V17C15 17.5523 14.5523 18 14 18C13.4477 18 13 17.5523 13 17V7Z"
                fill="#2E2F2F"
              />
              <path
                d="M77.8008 7C77.8008 6.44772 78.2485 6 78.8008 6C79.3531 6 79.8008 6.44772 79.8008 7V17C79.8008 17.5523 79.3531 18 78.8008 18C78.2485 18 77.8008 17.5523 77.8008 17V7Z"
                fill="#2E2F2F"
              />
              <path
                d="M142.6 7C142.6 6.44772 143.047 6 143.6 6C144.152 6 144.6 6.44772 144.6 7V17C144.6 17.5523 144.152 18 143.6 18C143.047 18 142.6 17.5523 142.6 17V7Z"
                fill="#2E2F2F"
              />
              <path
                d="M207.4 7C207.4 6.44772 207.848 6 208.4 6C208.953 6 209.4 6.44772 209.4 7V17C209.4 17.5523 208.953 18 208.4 18C207.848 18 207.4 17.5523 207.4 17V7Z"
                fill="#2E2F2F"
              />
              <path
                d="M272.199 7C272.199 6.44772 272.647 6 273.199 6C273.752 6 274.199 6.44772 274.199 7V17C274.199 17.5523 273.752 18 273.199 18C272.647 18 272.199 17.5523 272.199 17V7Z"
                fill="#2E2F2F"
              />
              <path
                d="M337 7C337 6.44772 337.448 6 338 6C338.552 6 339 6.44772 339 7V17C339 17.5523 338.552 18 338 18C337.448 18 337 17.5523 337 17V7Z"
                fill="#2E2F2F"
              />
              <circle cx="12" cy="12" r="12" fill="#70C59E" />
              <path
                d="M8.44906 37V36.016H10.4531V29.836L8.44906 31.264V30.04L10.4771 28.6H11.6051V36.016H13.2491V37H8.44906ZM13.9133 37L16.3013 33.772L14.0333 30.64H15.2573L16.9373 32.956L18.6173 30.64H19.7933L17.5253 33.712L19.9133 37H18.6653L16.8893 34.516L15.1133 37H13.9133Z"
                fill="#BCC3C2"
              />
              <path
                d="M69.5291 37V36.016H71.5331V29.836L69.5291 31.264V30.04L71.5571 28.6H72.6851V36.016H74.3291V37H69.5291ZM78.4134 37.12C78.0054 37.12 77.6214 37.052 77.2614 36.916C76.9014 36.772 76.5814 36.536 76.3014 36.208C76.0214 35.88 75.8014 35.44 75.6414 34.888C75.4894 34.328 75.4134 33.632 75.4134 32.8V32.56C75.4134 31.784 75.4894 31.136 75.6414 30.616C75.8014 30.088 76.0214 29.668 76.3014 29.356C76.5814 29.044 76.9014 28.82 77.2614 28.684C77.6214 28.548 78.0054 28.48 78.4134 28.48C78.8214 28.48 79.2054 28.548 79.5654 28.684C79.9254 28.82 80.2454 29.044 80.5254 29.356C80.8054 29.668 81.0214 30.088 81.1734 30.616C81.3334 31.136 81.4134 31.784 81.4134 32.56V32.8C81.4134 33.632 81.3334 34.328 81.1734 34.888C81.0214 35.44 80.8054 35.88 80.5254 36.208C80.2454 36.536 79.9254 36.772 79.5654 36.916C79.2054 37.052 78.8214 37.12 78.4134 37.12ZM78.4134 36.136C78.6694 36.136 78.9094 36.092 79.1334 36.004C79.3574 35.908 79.5534 35.74 79.7214 35.5C79.8974 35.252 80.0334 34.912 80.1294 34.48C80.2334 34.04 80.2854 33.48 80.2854 32.8V32.56C80.2854 31.728 80.1974 31.088 80.0214 30.64C79.8534 30.192 79.6254 29.884 79.3374 29.716C79.0574 29.548 78.7494 29.464 78.4134 29.464C78.0774 29.464 77.7654 29.548 77.4774 29.716C77.1974 29.884 76.9694 30.192 76.7934 30.64C76.6254 31.088 76.5414 31.728 76.5414 32.56V32.8C76.5414 33.48 76.5894 34.04 76.6854 34.48C76.7894 34.912 76.9254 35.252 77.0934 35.5C77.2694 35.74 77.4694 35.908 77.6934 36.004C77.9254 36.092 78.1654 36.136 78.4134 36.136ZM82.4348 37L84.8228 33.772L82.5548 30.64H83.7788L85.4588 32.956L87.1388 30.64H88.3148L86.0468 33.712L88.4348 37H87.1868L85.4108 34.516L83.6348 37H82.4348Z"
                fill="#BCC3C2"
              />
              <path
                d="M133.58 37V36.076L136.94 33.16C137.284 32.872 137.548 32.62 137.732 32.404C137.916 32.18 138.04 31.968 138.104 31.768C138.176 31.568 138.212 31.352 138.212 31.12C138.212 30.648 138.072 30.26 137.792 29.956C137.512 29.644 137.128 29.488 136.64 29.488C136.056 29.488 135.608 29.648 135.296 29.968C134.984 30.28 134.828 30.724 134.828 31.3H133.7C133.7 30.748 133.82 30.26 134.06 29.836C134.308 29.412 134.652 29.08 135.092 28.84C135.54 28.6 136.056 28.48 136.64 28.48C137.208 28.48 137.692 28.596 138.092 28.828C138.5 29.052 138.808 29.364 139.016 29.764C139.232 30.156 139.34 30.608 139.34 31.12C139.34 31.504 139.264 31.856 139.112 32.176C138.96 32.488 138.748 32.784 138.476 33.064C138.212 33.344 137.904 33.636 137.552 33.94L135.044 36.016H139.46V37H133.58ZM143.781 37.12C143.373 37.12 142.989 37.052 142.629 36.916C142.269 36.772 141.949 36.536 141.669 36.208C141.389 35.88 141.169 35.44 141.009 34.888C140.857 34.328 140.781 33.632 140.781 32.8V32.56C140.781 31.784 140.857 31.136 141.009 30.616C141.169 30.088 141.389 29.668 141.669 29.356C141.949 29.044 142.269 28.82 142.629 28.684C142.989 28.548 143.373 28.48 143.781 28.48C144.189 28.48 144.573 28.548 144.933 28.684C145.293 28.82 145.613 29.044 145.893 29.356C146.173 29.668 146.389 30.088 146.541 30.616C146.701 31.136 146.781 31.784 146.781 32.56V32.8C146.781 33.632 146.701 34.328 146.541 34.888C146.389 35.44 146.173 35.88 145.893 36.208C145.613 36.536 145.293 36.772 144.933 36.916C144.573 37.052 144.189 37.12 143.781 37.12ZM143.781 36.136C144.037 36.136 144.277 36.092 144.501 36.004C144.725 35.908 144.921 35.74 145.089 35.5C145.265 35.252 145.401 34.912 145.497 34.48C145.601 34.04 145.653 33.48 145.653 32.8V32.56C145.653 31.728 145.565 31.088 145.389 30.64C145.221 30.192 144.993 29.884 144.705 29.716C144.425 29.548 144.117 29.464 143.781 29.464C143.445 29.464 143.133 29.548 142.845 29.716C142.565 29.884 142.337 30.192 142.161 30.64C141.993 31.088 141.909 31.728 141.909 32.56V32.8C141.909 33.48 141.957 34.04 142.053 34.48C142.157 34.912 142.293 35.252 142.461 35.5C142.637 35.74 142.837 35.908 143.061 36.004C143.293 36.092 143.533 36.136 143.781 36.136ZM147.802 37L150.19 33.772L147.922 30.64H149.146L150.826 32.956L152.506 30.64H153.682L151.414 33.712L153.802 37H152.554L150.778 34.516L149.002 37H147.802Z"
                fill="#BCC3C2"
              />
              <path
                d="M201.291 37.12C200.683 37.12 200.163 37.016 199.731 36.808C199.307 36.592 198.979 36.304 198.747 35.944C198.523 35.576 198.411 35.168 198.411 34.72H199.539C199.539 35.128 199.679 35.464 199.959 35.728C200.239 35.984 200.683 36.112 201.291 36.112C201.899 36.112 202.343 35.98 202.623 35.716C202.903 35.444 203.043 35.092 203.043 34.66C203.043 34.212 202.899 33.852 202.611 33.58C202.331 33.3 201.891 33.16 201.291 33.16H200.391V32.2H201.291C201.867 32.2 202.283 32.08 202.539 31.84C202.795 31.592 202.923 31.252 202.923 30.82C202.923 30.404 202.799 30.08 202.551 29.848C202.303 29.608 201.883 29.488 201.291 29.488C200.723 29.488 200.307 29.612 200.043 29.86C199.787 30.1 199.659 30.4 199.659 30.76H198.531C198.531 30.336 198.639 29.952 198.855 29.608C199.071 29.264 199.383 28.992 199.791 28.792C200.207 28.584 200.707 28.48 201.291 28.48C201.883 28.48 202.383 28.584 202.791 28.792C203.207 28.992 203.519 29.26 203.727 29.596C203.943 29.932 204.051 30.3 204.051 30.7C204.051 31.18 203.923 31.588 203.667 31.924C203.419 32.252 203.067 32.484 202.611 32.62C203.091 32.772 203.471 33.02 203.751 33.364C204.031 33.708 204.171 34.18 204.171 34.78C204.171 35.204 204.059 35.596 203.835 35.956C203.611 36.308 203.283 36.592 202.851 36.808C202.427 37.016 201.907 37.12 201.291 37.12ZM208.611 37.12C208.203 37.12 207.819 37.052 207.459 36.916C207.099 36.772 206.779 36.536 206.499 36.208C206.219 35.88 205.999 35.44 205.839 34.888C205.687 34.328 205.611 33.632 205.611 32.8V32.56C205.611 31.784 205.687 31.136 205.839 30.616C205.999 30.088 206.219 29.668 206.499 29.356C206.779 29.044 207.099 28.82 207.459 28.684C207.819 28.548 208.203 28.48 208.611 28.48C209.019 28.48 209.403 28.548 209.763 28.684C210.123 28.82 210.443 29.044 210.723 29.356C211.003 29.668 211.219 30.088 211.371 30.616C211.531 31.136 211.611 31.784 211.611 32.56V32.8C211.611 33.632 211.531 34.328 211.371 34.888C211.219 35.44 211.003 35.88 210.723 36.208C210.443 36.536 210.123 36.772 209.763 36.916C209.403 37.052 209.019 37.12 208.611 37.12ZM208.611 36.136C208.867 36.136 209.107 36.092 209.331 36.004C209.555 35.908 209.751 35.74 209.919 35.5C210.095 35.252 210.231 34.912 210.327 34.48C210.431 34.04 210.483 33.48 210.483 32.8V32.56C210.483 31.728 210.395 31.088 210.219 30.64C210.051 30.192 209.823 29.884 209.535 29.716C209.255 29.548 208.947 29.464 208.611 29.464C208.275 29.464 207.963 29.548 207.675 29.716C207.395 29.884 207.167 30.192 206.991 30.64C206.823 31.088 206.739 31.728 206.739 32.56V32.8C206.739 33.48 206.787 34.04 206.883 34.48C206.987 34.912 207.123 35.252 207.291 35.5C207.467 35.74 207.667 35.908 207.891 36.004C208.123 36.092 208.363 36.136 208.611 36.136ZM212.632 37L215.02 33.772L212.752 30.64H213.976L215.656 32.956L217.336 30.64H218.512L216.244 33.712L218.632 37H217.384L215.608 34.516L213.832 37H212.632Z"
                fill="#BCC3C2"
              />
              <path
                d="M266.179 37.12C265.723 37.12 265.327 37.06 264.991 36.94C264.655 36.82 264.371 36.656 264.139 36.448C263.915 36.24 263.743 36.008 263.623 35.752C263.503 35.496 263.435 35.232 263.419 34.96H264.547C264.587 35.264 264.747 35.532 265.027 35.764C265.315 35.996 265.699 36.112 266.179 36.112C266.723 36.112 267.151 35.944 267.463 35.608C267.775 35.264 267.931 34.788 267.931 34.18C267.931 33.716 267.847 33.344 267.679 33.064C267.511 32.776 267.291 32.568 267.019 32.44C266.755 32.312 266.475 32.248 266.179 32.248C265.747 32.248 265.407 32.328 265.159 32.488C264.919 32.648 264.735 32.832 264.607 33.04H263.599V28.6H268.579V29.584H264.727V31.924C264.935 31.692 265.175 31.52 265.447 31.408C265.719 31.296 266.023 31.24 266.359 31.24C266.919 31.24 267.399 31.352 267.799 31.576C268.199 31.8 268.507 32.132 268.723 32.572C268.947 33.004 269.059 33.54 269.059 34.18C269.059 34.78 268.935 35.3 268.687 35.74C268.447 36.18 268.111 36.52 267.679 36.76C267.247 37 266.747 37.12 266.179 37.12ZM273.38 37.12C272.972 37.12 272.588 37.052 272.228 36.916C271.868 36.772 271.548 36.536 271.268 36.208C270.988 35.88 270.768 35.44 270.608 34.888C270.456 34.328 270.38 33.632 270.38 32.8V32.56C270.38 31.784 270.456 31.136 270.608 30.616C270.768 30.088 270.988 29.668 271.268 29.356C271.548 29.044 271.868 28.82 272.228 28.684C272.588 28.548 272.972 28.48 273.38 28.48C273.788 28.48 274.172 28.548 274.532 28.684C274.892 28.82 275.212 29.044 275.492 29.356C275.772 29.668 275.988 30.088 276.14 30.616C276.3 31.136 276.38 31.784 276.38 32.56V32.8C276.38 33.632 276.3 34.328 276.14 34.888C275.988 35.44 275.772 35.88 275.492 36.208C275.212 36.536 274.892 36.772 274.532 36.916C274.172 37.052 273.788 37.12 273.38 37.12ZM273.38 36.136C273.636 36.136 273.876 36.092 274.1 36.004C274.324 35.908 274.52 35.74 274.688 35.5C274.864 35.252 275 34.912 275.096 34.48C275.2 34.04 275.252 33.48 275.252 32.8V32.56C275.252 31.728 275.164 31.088 274.988 30.64C274.82 30.192 274.592 29.884 274.304 29.716C274.024 29.548 273.716 29.464 273.38 29.464C273.044 29.464 272.732 29.548 272.444 29.716C272.164 29.884 271.936 30.192 271.76 30.64C271.592 31.088 271.508 31.728 271.508 32.56V32.8C271.508 33.48 271.556 34.04 271.652 34.48C271.756 34.912 271.892 35.252 272.06 35.5C272.236 35.74 272.436 35.908 272.66 36.004C272.892 36.092 273.132 36.136 273.38 36.136ZM277.402 37L279.79 33.772L277.522 30.64H278.746L280.426 32.956L282.106 30.64H283.282L281.014 33.712L283.402 37H282.154L280.378 34.516L278.602 37H277.402Z"
                fill="#BCC3C2"
              />
              <path
                d="M325.008 37V36.016H327.012V29.836L325.008 31.264V30.04L327.036 28.6H328.164V36.016H329.808V37H325.008ZM333.892 37.12C333.484 37.12 333.1 37.052 332.74 36.916C332.38 36.772 332.06 36.536 331.78 36.208C331.5 35.88 331.28 35.44 331.12 34.888C330.968 34.328 330.892 33.632 330.892 32.8V32.56C330.892 31.784 330.968 31.136 331.12 30.616C331.28 30.088 331.5 29.668 331.78 29.356C332.06 29.044 332.38 28.82 332.74 28.684C333.1 28.548 333.484 28.48 333.892 28.48C334.3 28.48 334.684 28.548 335.044 28.684C335.404 28.82 335.724 29.044 336.004 29.356C336.284 29.668 336.5 30.088 336.652 30.616C336.812 31.136 336.892 31.784 336.892 32.56V32.8C336.892 33.632 336.812 34.328 336.652 34.888C336.5 35.44 336.284 35.88 336.004 36.208C335.724 36.536 335.404 36.772 335.044 36.916C334.684 37.052 334.3 37.12 333.892 37.12ZM333.892 36.136C334.148 36.136 334.388 36.092 334.612 36.004C334.836 35.908 335.032 35.74 335.2 35.5C335.376 35.252 335.512 34.912 335.608 34.48C335.712 34.04 335.764 33.48 335.764 32.8V32.56C335.764 31.728 335.676 31.088 335.5 30.64C335.332 30.192 335.104 29.884 334.816 29.716C334.536 29.548 334.228 29.464 333.892 29.464C333.556 29.464 333.244 29.548 332.956 29.716C332.676 29.884 332.448 30.192 332.272 30.64C332.104 31.088 332.02 31.728 332.02 32.56V32.8C332.02 33.48 332.068 34.04 332.164 34.48C332.268 34.912 332.404 35.252 332.572 35.5C332.748 35.74 332.948 35.908 333.172 36.004C333.404 36.092 333.644 36.136 333.892 36.136ZM341.333 37.12C340.925 37.12 340.541 37.052 340.181 36.916C339.821 36.772 339.501 36.536 339.221 36.208C338.941 35.88 338.721 35.44 338.561 34.888C338.409 34.328 338.333 33.632 338.333 32.8V32.56C338.333 31.784 338.409 31.136 338.561 30.616C338.721 30.088 338.941 29.668 339.221 29.356C339.501 29.044 339.821 28.82 340.181 28.684C340.541 28.548 340.925 28.48 341.333 28.48C341.741 28.48 342.125 28.548 342.485 28.684C342.845 28.82 343.165 29.044 343.445 29.356C343.725 29.668 343.941 30.088 344.093 30.616C344.253 31.136 344.333 31.784 344.333 32.56V32.8C344.333 33.632 344.253 34.328 344.093 34.888C343.941 35.44 343.725 35.88 343.445 36.208C343.165 36.536 342.845 36.772 342.485 36.916C342.125 37.052 341.741 37.12 341.333 37.12ZM341.333 36.136C341.589 36.136 341.829 36.092 342.053 36.004C342.277 35.908 342.473 35.74 342.641 35.5C342.817 35.252 342.953 34.912 343.049 34.48C343.153 34.04 343.205 33.48 343.205 32.8V32.56C343.205 31.728 343.117 31.088 342.941 30.64C342.773 30.192 342.545 29.884 342.257 29.716C341.977 29.548 341.669 29.464 341.333 29.464C340.997 29.464 340.685 29.548 340.397 29.716C340.117 29.884 339.889 30.192 339.713 30.64C339.545 31.088 339.461 31.728 339.461 32.56V32.8C339.461 33.48 339.509 34.04 339.605 34.48C339.709 34.912 339.845 35.252 340.013 35.5C340.189 35.74 340.389 35.908 340.613 36.004C340.845 36.092 341.085 36.136 341.333 36.136ZM345.355 37L347.743 33.772L345.475 30.64H346.699L348.379 32.956L350.059 30.64H351.235L348.967 33.712L351.355 37H350.107L348.331 34.516L346.555 37H345.355Z"
                fill="#BCC3C2"
              />
            </svg>
          </div>
        </div>
        <div className="mb-4">
          <InputLabel label="Period, days" tooltipText="Period tooltip" />
          <div className="grid grid-cols-[1fr_12px_1fr] gap-2">
            <Input placeholder="From" />
            <div className="h-full flex items-center">—</div>
            <Input placeholder="To" />
          </div>
        </div>
        <div className="mb-4">
          <InputLabel
            label="Max interest rate per month"
            tooltipText="Max interest rate per month tooltip"
          />
          <Input placeholder="Interest rate" />
        </div>
        <div className="mb-4">
          <InputLabel label="Order currency limit" tooltipText="Order currency limit tooltip" />
          <Input placeholder="Order currency limit" />
        </div>

        <div className="mb-8">
          <InputLabel
            label="Liquidation price source"
            tooltipText="Liquidation price source tooltip"
          />
          <div className="flex flex-col gap-3">
            <CheckboxExternalLink
              checked={true}
              handleChange={() => {}}
              id="liqu_src_1"
              label="DEX223 market"
            />
            <CheckboxExternalLink
              checked={true}
              handleChange={() => {}}
              id="liqu_src_2"
              label="Uniswap market"
            />
            <CheckboxExternalLink
              checked={true}
              handleChange={() => {}}
              id="liqu_src_3"
              label="LINK price oracle"
            />
          </div>
        </div>
        <ButtonRow>
          <Button variant={ButtonVariant.OUTLINED}>Cancel</Button>
          <Button>Apply</Button>
        </ButtonRow>
      </div>
    </Drawer>
  );
}
